<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="fp-data-store">
    <template>
        <iron-ajax auto
            url=[[sourceUrl]]
            handle-as="json"
            on-response="_handleResponse"></iron-ajax>
    </template>
    <script>
        Polymer({

            is: 'fp-data-store',
            properties: {
                categories: {
                    type: Array,
                    notify: true,
                },
                sourceUrl: String
            },

            _handleResponse: function(result){
                this.categories = this._toArray(result.detail.response);
            },
            
            _toArray: function(obj){
                return Object.keys(obj).map(function(key){
                    obj[key].id = key;
                    return obj[key];
                })
            },
        });
    </script>
</dom-module>