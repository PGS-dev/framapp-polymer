<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="fp-categories-table.html">
<link rel="import" href="fp-products-table.html">
<link rel="import" href="fp-category-editor.html">

<dom-module id="fp-admin-page">
  <template>
    <template is="dom-if" if="{{signedIn}}"  restamp="true">
      <app-route route="{{route}}"
             pattern="/:page"
             data="{{routeData}}"
             tail="{{subroute}}"></app-route>

      <iron-pages id="adminPages"
                  role="main"
                  selected="[[routeData.page]]"
                  on-selected-item-changed="_load"
                  attr-for-selected="name">

        <fp-categories-table name="categories"></fp-categories-table>
        
        <fp-products-table name="products"
                           subroute="[[subroute]]"></fp-products-table>
        <fp-category-editor name="category"
                            route="[[subroute]]"></fp-category-editor>
      </iron-pages>
    </template>
 </template>
 
 <script>
  Polymer({
    is: 'fp-admin-page',
    _load: function(e) {
      if(e.detail.value && e.detail.value.load)
        e.detail.value.load();
    }
  });
  </script>
</dom-module>
