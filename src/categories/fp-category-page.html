<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">

<link rel="import" href="../products/fp-product-card.html">
<link rel="import" href="../stores/fp-products-store.html">
<link rel="import" href="../behaviors/selectable-behavior.html">

<!--
`fp-category-page`


@demo ../demo/fp-category-page-demo.html 
-->

<dom-module id="fp-category-page">
  <template>
    <style>
      :host {
        display: block;
      }

      fp-product-card {
        padding: 4px;
      }
      
    </style>
        <app-route route="{{route}}"
                   pattern="/:id"
                   data="{{category}}"></app-route>

        <fp-products-store id="store" products="{{products}}" category="[[category]]"></fp-products-store>
        <template is="dom-repeat" items="[[products]]" as="product">
            <fp-product-card product="[[product]]"></fp-product-card>
        </template>
  </template>
  <script>
    Polymer({

      is: 'fp-category-page',
      properties: {
        route: Object
      },

      behaviors: [FramApp.LoadWhenSelected],

      _load: function() {
        this.$.store.loadProducts();
      }
    });
  </script>
</dom-module>
